{"ast":null,"code":"import _regeneratorRuntime from \"S:/personal-projects/mern-todo-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"S:/personal-projects/mern-todo-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"S:/personal-projects/mern-todo-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"S:/personal-projects/mern-todo-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"S:/personal-projects/mern-todo-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"S:\\\\personal-projects\\\\mern-todo-app\\\\client\\\\src\\\\components\\\\Todo\\\\Todo.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Route, Switch } from \"react-router\";\nimport { Container } from \"@material-ui/core\";\nimport { useToasts } from \"react-toast-notifications\";\nimport AllTodos from \"./AllTodos\";\nimport CompletedTodos from \"./CompletedTodos\";\nimport TodoHeader from \"./TodoHeader\";\nimport TodoInput from \"./TodoInput\";\nimport { axios } from \"../../http/http\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Todo() {\n  _s();\n\n  var _this = this;\n\n  var _useToasts = useToasts(),\n      addToast = _useToasts.addToast;\n\n  var _useState = useState({\n    title: \"\",\n    description: \"\",\n    isCompleted: false\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      todo = _useState2[0],\n      setTodo = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      allTodos = _useState4[0],\n      setAllTodos = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      completedTodos = _useState6[0],\n      setCompletedTodos = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isFetchingTodos = _useState8[0],\n      setIsFetchingTodos = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isTodoAdding = _useState10[0],\n      setIsTodoAdding = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      isDeleting = _useState12[0],\n      setIsDeleting = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isMarkingAsCompleted = _useState14[0],\n      setIsMarkingAsCompleted = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      selectedTodoId = _useState16[0],\n      setSelectedTodoId = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      isFetchingCompletedTodos = _useState18[0],\n      setIsFetchingCompletedTodos = _useState18[1];\n\n  var _useState19 = useState({\n    titleError: false,\n    descError: false\n  }),\n      _useState20 = _slicedToArray(_useState19, 2),\n      error = _useState20[0],\n      setError = _useState20[1];\n\n  var inputChangeHandler = function inputChangeHandler(event) {\n    var _objectSpread2;\n\n    setError({\n      titleError: false,\n      descError: false\n    });\n    setTodo(_objectSpread(_objectSpread({}, todo), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, event.target.name, event.target.value), _defineProperty(_objectSpread2, \"isCompleted\", false), _objectSpread2)));\n  };\n\n  var addTodoToTheDb = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$axios$post, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setIsTodoAdding(true);\n              _context.next = 4;\n              return axios.post(\"/todo/create_todo\", todo);\n\n            case 4:\n              _yield$axios$post = _context.sent;\n              data = _yield$axios$post.data;\n              addToast(\"Todo added Successfully\", {\n                appearance: \"success\",\n                autoDismiss: true\n              });\n              setTodo({\n                title: \"\",\n                description: \"\",\n                isCompleted: false\n              });\n              fetchAllTodos();\n              _context.next = 15;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n              addToast(\"Something went wrong\", {\n                appearance: \"error\",\n                autoDismiss: true\n              });\n\n            case 15:\n              _context.prev = 15;\n              setIsTodoAdding(false);\n              return _context.finish(15);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 11, 15, 18]]);\n    }));\n\n    return function addTodoToTheDb() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var addTodoHandler = function addTodoHandler(event) {\n    event.preventDefault();\n\n    if (todo.title === \"\" || todo.title.length <= 8) {\n      setError(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          titleError: true\n        });\n      });\n    }\n\n    if (todo.description === \"\" || todo.description.length <= 16) {\n      setError(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          descError: true\n        });\n      });\n    }\n\n    if (todo.title === \"\" || todo.description === \"\" || todo.title.length < 8 || todo.description.length < 16) {\n      return;\n    }\n\n    addTodoToTheDb();\n  }; // delete todo handler\n\n\n  var deleteTodoHandler = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      var _yield$axios$delete, data;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setSelectedTodoId(id);\n              _context2.prev = 1;\n              setIsDeleting(true);\n              _context2.next = 5;\n              return axios.delete(\"/todo/\".concat(id));\n\n            case 5:\n              _yield$axios$delete = _context2.sent;\n              data = _yield$axios$delete.data;\n              console.log(data);\n              addToast(\"Todo deleted Successfully\", {\n                appearance: \"success\",\n                autoDismiss: true\n              });\n              fetchAllTodos();\n              _context2.next = 16;\n              break;\n\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](1);\n              addToast(\"Something went wrong\", {\n                appearance: \"error\",\n                autoDismiss: true\n              });\n              console.log(_context2.t0);\n\n            case 16:\n              _context2.prev = 16;\n              setIsDeleting(false);\n              return _context2.finish(16);\n\n            case 19:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 12, 16, 19]]);\n    }));\n\n    return function deleteTodoHandler(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // mark as completed todo handler\n\n\n  var markAsCompletedHandler = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      var _yield$axios$put, data;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setSelectedTodoId(id);\n              _context3.prev = 1;\n              setIsMarkingAsCompleted(true);\n              _context3.next = 5;\n              return axios.put(\"/todo/\".concat(id));\n\n            case 5:\n              _yield$axios$put = _context3.sent;\n              data = _yield$axios$put.data;\n              console.log(data);\n              fetchAllTodos();\n              addToast(\"Todo updated Successfully\", {\n                appearance: \"success\",\n                autoDismiss: true\n              });\n              _context3.next = 16;\n              break;\n\n            case 12:\n              _context3.prev = 12;\n              _context3.t0 = _context3[\"catch\"](1);\n              console.log(_context3.t0);\n              addToast(\"Something went wrong\", {\n                appearance: \"error\",\n                autoDismiss: true\n              });\n\n            case 16:\n              _context3.prev = 16;\n              setIsMarkingAsCompleted(false);\n              return _context3.finish(16);\n\n            case 19:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 12, 16, 19]]);\n    }));\n\n    return function markAsCompletedHandler(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }(); // fetching all the todos\n\n\n  var fetchAllTodos = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var _yield$axios$get, data;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              setIsFetchingTodos(true);\n              _context4.next = 4;\n              return axios.get(\"/todo/all_todos\");\n\n            case 4:\n              _yield$axios$get = _context4.sent;\n              data = _yield$axios$get.data;\n              setAllTodos(data.todos);\n              _context4.next = 13;\n              break;\n\n            case 9:\n              _context4.prev = 9;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.log(_context4.t0);\n              addToast(\"Something went wrong\", {\n                appearance: \"error\",\n                autoDismiss: true\n              });\n\n            case 13:\n              _context4.prev = 13;\n              setIsFetchingTodos(false);\n              return _context4.finish(13);\n\n            case 16:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 9, 13, 16]]);\n    }));\n\n    return function fetchAllTodos() {\n      return _ref4.apply(this, arguments);\n    };\n  }(); // fetching completed todos\n\n\n  var fetchCompletedTodos = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var _yield$axios$get2, data;\n\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              setIsFetchingCompletedTodos(true);\n              _context5.next = 4;\n              return axios.get(\"/completed_todos\");\n\n            case 4:\n              _yield$axios$get2 = _context5.sent;\n              data = _yield$axios$get2.data;\n              setCompletedTodos(data.todos);\n              _context5.next = 13;\n              break;\n\n            case 9:\n              _context5.prev = 9;\n              _context5.t0 = _context5[\"catch\"](0);\n              addToast(\"Something went wrong\", {\n                appearance: \"error\",\n                autoDismiss: true\n              });\n              console.log(_context5.t0);\n\n            case 13:\n              _context5.prev = 13;\n              setIsFetchingCompletedTodos(false);\n              return _context5.finish(13);\n\n            case 16:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[0, 9, 13, 16]]);\n    }));\n\n    return function fetchCompletedTodos() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    fetchAllTodos();\n    fetchCompletedTodos();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    style: {\n      height: \"calc(100vh - 124px)\"\n    },\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(TodoInput, {\n        todo: todo,\n        inputChangeHandler: inputChangeHandler,\n        addTodoHandler: addTodoHandler,\n        error: error,\n        isTodoAdding: isTodoAdding\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TodoHeader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/\",\n            render: function render(props) {\n              return /*#__PURE__*/_jsxDEV(AllTodos, _objectSpread(_objectSpread({}, props), {}, {\n                allTodos: allTodos,\n                isFetchingTodos: isFetchingTodos,\n                deleteTodoHandler: deleteTodoHandler,\n                isDeleting: isDeleting,\n                selectedTodoId: selectedTodoId,\n                isMarkingAsCompleted: isMarkingAsCompleted,\n                markAsCompletedHandler: markAsCompletedHandler\n              }), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 17\n              }, _this);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/completed\",\n            render: function render(props) {\n              return /*#__PURE__*/_jsxDEV(CompletedTodos, _objectSpread(_objectSpread({}, props), {}, {\n                completedTodos: completedTodos,\n                isFetchingCompletedTodos: isFetchingCompletedTodos,\n                deleteTodoHandler: deleteTodoHandler,\n                isDeleting: isDeleting,\n                selectedTodoId: selectedTodoId,\n                isMarkingAsCompleted: isMarkingAsCompleted,\n                markAsCompletedHandler: markAsCompletedHandler\n              }), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 17\n              }, _this);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 190,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Todo, \"MvanliMQyrbNzvN+QZF22KY8Eyg=\", false, function () {\n  return [useToasts];\n});\n\n_c = Todo;\nexport default Todo;\n\nvar _c;\n\n$RefreshReg$(_c, \"Todo\");","map":{"version":3,"sources":["S:/personal-projects/mern-todo-app/client/src/components/Todo/Todo.tsx"],"names":["React","useEffect","useState","Route","Switch","Container","useToasts","AllTodos","CompletedTodos","TodoHeader","TodoInput","axios","Todo","addToast","title","description","isCompleted","todo","setTodo","allTodos","setAllTodos","completedTodos","setCompletedTodos","isFetchingTodos","setIsFetchingTodos","isTodoAdding","setIsTodoAdding","isDeleting","setIsDeleting","isMarkingAsCompleted","setIsMarkingAsCompleted","selectedTodoId","setSelectedTodoId","isFetchingCompletedTodos","setIsFetchingCompletedTodos","titleError","descError","error","setError","inputChangeHandler","event","target","name","value","addTodoToTheDb","post","data","appearance","autoDismiss","fetchAllTodos","console","log","addTodoHandler","preventDefault","length","prevState","deleteTodoHandler","id","delete","markAsCompletedHandler","put","get","todos","fetchCompletedTodos","height","props"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nimport { Route, Switch } from \"react-router\";\r\nimport { Container } from \"@material-ui/core\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\n\r\nimport AllTodos from \"./AllTodos\";\r\nimport CompletedTodos from \"./CompletedTodos\";\r\nimport TodoHeader from \"./TodoHeader\";\r\nimport TodoInput from \"./TodoInput\";\r\nimport {\r\n  AllTodoResponseType,\r\n  TodoType,\r\n  ResponseTodoType,\r\n} from \"../../types/types\";\r\nimport { axios } from \"../../http/http\";\r\n\r\nfunction Todo() {\r\n  const { addToast } = useToasts();\r\n\r\n  const [todo, setTodo] = useState<TodoType>({\r\n    title: \"\",\r\n    description: \"\",\r\n    isCompleted: false,\r\n  });\r\n\r\n  const [allTodos, setAllTodos] = useState<ResponseTodoType[]>([]);\r\n  const [completedTodos, setCompletedTodos] = useState<ResponseTodoType[]>([]);\r\n\r\n  const [isFetchingTodos, setIsFetchingTodos] = useState(false);\r\n  const [isTodoAdding, setIsTodoAdding] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [isMarkingAsCompleted, setIsMarkingAsCompleted] = useState(false);\r\n  const [selectedTodoId, setSelectedTodoId] = useState<string>(\"\");\r\n  const [isFetchingCompletedTodos, setIsFetchingCompletedTodos] =\r\n    useState(false);\r\n\r\n  const [error, setError] = useState({\r\n    titleError: false,\r\n    descError: false,\r\n  });\r\n\r\n  const inputChangeHandler = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setError({ titleError: false, descError: false });\r\n    setTodo({\r\n      ...todo,\r\n      [event.target.name]: event.target.value,\r\n      isCompleted: false,\r\n    });\r\n  };\r\n\r\n  const addTodoToTheDb = async () => {\r\n    try {\r\n      setIsTodoAdding(true);\r\n      const { data } = await axios.post(\"/todo/create_todo\", todo);\r\n      addToast(\"Todo added Successfully\", {\r\n        appearance: \"success\",\r\n        autoDismiss: true,\r\n      });\r\n      setTodo({\r\n        title: \"\",\r\n        description: \"\",\r\n        isCompleted: false,\r\n      });\r\n\r\n      fetchAllTodos();\r\n    } catch (err) {\r\n      console.log(err);\r\n      addToast(\"Something went wrong\", {\r\n        appearance: \"error\",\r\n        autoDismiss: true,\r\n      });\r\n    } finally {\r\n      setIsTodoAdding(false);\r\n    }\r\n  };\r\n\r\n  const addTodoHandler = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n\r\n    if (todo.title === \"\" || todo.title.length <= 8) {\r\n      setError((prevState) => {\r\n        return { ...prevState, titleError: true };\r\n      });\r\n    }\r\n    if (todo.description === \"\" || todo.description.length <= 16) {\r\n      setError((prevState) => {\r\n        return { ...prevState, descError: true };\r\n      });\r\n    }\r\n\r\n    if (\r\n      todo.title === \"\" ||\r\n      todo.description === \"\" ||\r\n      todo.title.length < 8 ||\r\n      todo.description.length < 16\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    addTodoToTheDb();\r\n  };\r\n\r\n  // delete todo handler\r\n  const deleteTodoHandler = async (id: string) => {\r\n    setSelectedTodoId(id);\r\n    try {\r\n      setIsDeleting(true);\r\n      const { data } = await axios.delete(`/todo/${id}`);\r\n      console.log(data);\r\n      addToast(\"Todo deleted Successfully\", {\r\n        appearance: \"success\",\r\n        autoDismiss: true,\r\n      });\r\n      fetchAllTodos();\r\n    } catch (err) {\r\n      addToast(\"Something went wrong\", {\r\n        appearance: \"error\",\r\n        autoDismiss: true,\r\n      });\r\n      console.log(err);\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  // mark as completed todo handler\r\n  const markAsCompletedHandler = async (id: string) => {\r\n    setSelectedTodoId(id);\r\n    try {\r\n      setIsMarkingAsCompleted(true);\r\n      const { data } = await axios.put(`/todo/${id}`);\r\n      console.log(data);\r\n      fetchAllTodos();\r\n      addToast(\"Todo updated Successfully\", {\r\n        appearance: \"success\",\r\n        autoDismiss: true,\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n      addToast(\"Something went wrong\", {\r\n        appearance: \"error\",\r\n        autoDismiss: true,\r\n      });\r\n    } finally {\r\n      setIsMarkingAsCompleted(false);\r\n    }\r\n  };\r\n\r\n  // fetching all the todos\r\n  const fetchAllTodos = async () => {\r\n    try {\r\n      setIsFetchingTodos(true);\r\n      const { data } = await axios.get<AllTodoResponseType>(\"/todo/all_todos\");\r\n      setAllTodos(data.todos);\r\n    } catch (error) {\r\n      console.log(error);\r\n      addToast(\"Something went wrong\", {\r\n        appearance: \"error\",\r\n        autoDismiss: true,\r\n      });\r\n    } finally {\r\n      setIsFetchingTodos(false);\r\n    }\r\n  };\r\n\r\n  // fetching completed todos\r\n  const fetchCompletedTodos = async () => {\r\n    try {\r\n      setIsFetchingCompletedTodos(true);\r\n      const { data } = await axios.get<AllTodoResponseType>(\"/completed_todos\");\r\n      setCompletedTodos(data.todos);\r\n    } catch (error) {\r\n      addToast(\"Something went wrong\", {\r\n        appearance: \"error\",\r\n        autoDismiss: true,\r\n      });\r\n      console.log(error);\r\n    } finally {\r\n      setIsFetchingCompletedTodos(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchAllTodos();\r\n    fetchCompletedTodos();\r\n  }, []);\r\n\r\n  return (\r\n    <section style={{ height: \"calc(100vh - 124px)\" }}>\r\n      <Container>\r\n        <TodoInput\r\n          todo={todo}\r\n          inputChangeHandler={inputChangeHandler}\r\n          addTodoHandler={addTodoHandler}\r\n          error={error}\r\n          isTodoAdding={isTodoAdding}\r\n        />\r\n\r\n        <TodoHeader />\r\n\r\n        <main>\r\n          <Switch>\r\n            <Route\r\n              exact\r\n              path=\"/\"\r\n              render={(props) => (\r\n                <AllTodos\r\n                  {...props}\r\n                  allTodos={allTodos}\r\n                  isFetchingTodos={isFetchingTodos}\r\n                  deleteTodoHandler={deleteTodoHandler}\r\n                  isDeleting={isDeleting}\r\n                  selectedTodoId={selectedTodoId}\r\n                  isMarkingAsCompleted={isMarkingAsCompleted}\r\n                  markAsCompletedHandler={markAsCompletedHandler}\r\n                />\r\n              )}\r\n            />\r\n            <Route\r\n              path=\"/completed\"\r\n              render={(props) => (\r\n                <CompletedTodos\r\n                  {...props}\r\n                  completedTodos={completedTodos}\r\n                  isFetchingCompletedTodos={isFetchingCompletedTodos}\r\n                  deleteTodoHandler={deleteTodoHandler}\r\n                  isDeleting={isDeleting}\r\n                  selectedTodoId={selectedTodoId}\r\n                  isMarkingAsCompleted={isMarkingAsCompleted}\r\n                  markAsCompletedHandler={markAsCompletedHandler}\r\n                />\r\n              )}\r\n            />\r\n          </Switch>\r\n        </main>\r\n      </Container>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Todo;\r\n"]},"metadata":{},"sourceType":"module"}