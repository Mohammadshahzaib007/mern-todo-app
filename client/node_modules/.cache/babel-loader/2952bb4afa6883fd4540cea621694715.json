{"ast":null,"code":"import _slicedToArray from \"S:/personal-projects/mern-todo-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"S:\\\\personal-projects\\\\mern-todo-app\\\\client\\\\src\\\\App.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { Route, Switch, useHistory, useLocation } from \"react-router\";\nimport Signin from \"./components/auth/Signin\";\nimport Signup from \"./components/auth/Signup\";\nimport Layout from \"./components/Layout/Layout\";\nimport Todo from \"./components/Todo/Todo\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  var _useLocation = useLocation(),\n      pathname = _useLocation.pathname;\n\n  var history = useHistory();\n\n  var _useState = useState({\n    isAuth: false,\n    token: null,\n    userId: null,\n    authLoading: false,\n    error: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  useEffect(function () {\n    if (state.isAuth && pathname === \"/\") {\n      history.push(\"/all-todos\");\n    } else {\n      history.push(\"/signin\");\n    }\n  });\n\n  var routes = /*#__PURE__*/_jsxDEV(Switch, {\n    children: /*#__PURE__*/_jsxDEV(Route, {\n      exact: true,\n      path: \"/\",\n      component: Todo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n\n  if (!state.isAuth) {\n    routes = /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/signin\",\n        component: Signin\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/signup\",\n        component: Signup\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Layout, {\n      children: routes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"xuj4EyE1Kv2TBwHv0C+OPzaIdGk=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["S:/personal-projects/mern-todo-app/client/src/App.tsx"],"names":["React","useState","useEffect","Route","Switch","useHistory","useLocation","Signin","Signup","Layout","Todo","App","pathname","history","isAuth","token","userId","authLoading","error","state","setState","push","routes"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,UAAxB,EAAoCC,WAApC,QAAuD,cAAvD;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AAEA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;;;AAEA,SAASC,GAAT,GAAe;AAAA;;AACb,qBAAqBL,WAAW,EAAhC;AAAA,MAAQM,QAAR,gBAAQA,QAAR;;AAEA,MAAMC,OAAO,GAAGR,UAAU,EAA1B;;AAEA,kBAA0BJ,QAAQ,CAAC;AACjCa,IAAAA,MAAM,EAAE,KADyB;AAEjCC,IAAAA,KAAK,EAAE,IAF0B;AAGjCC,IAAAA,MAAM,EAAE,IAHyB;AAIjCC,IAAAA,WAAW,EAAE,KAJoB;AAKjCC,IAAAA,KAAK,EAAE;AAL0B,GAAD,CAAlC;AAAA;AAAA,MAAOC,KAAP;AAAA,MAAcC,QAAd;;AAQAlB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIiB,KAAK,CAACL,MAAN,IAAgBF,QAAQ,KAAK,GAAjC,EAAsC;AACpCC,MAAAA,OAAO,CAACQ,IAAR,CAAa,YAAb;AACD,KAFD,MAEO;AACLR,MAAAA,OAAO,CAACQ,IAAR,CAAa,SAAb;AACD;AACF,GANQ,CAAT;;AAQA,MAAIC,MAAM,gBACR,QAAC,MAAD;AAAA,2BACE,QAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAC,GAAlB;AAAsB,MAAA,SAAS,EAAEZ;AAAjC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;;AAMA,MAAI,CAACS,KAAK,CAACL,MAAX,EAAmB;AACjBQ,IAAAA,MAAM,gBACJ,QAAC,MAAD;AAAA,8BACE,QAAC,KAAD;AAAO,QAAA,KAAK,MAAZ;AAAa,QAAA,IAAI,EAAC,SAAlB;AAA4B,QAAA,SAAS,EAAEf;AAAvC;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,KAAD;AAAO,QAAA,IAAI,EAAC,SAAZ;AAAsB,QAAA,SAAS,EAAEC;AAAjC;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAMD;;AAED,sBACE;AAAA,2BACE,QAAC,MAAD;AAAA,gBAASc;AAAT;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAKD;;GAzCQX,G;UACcL,W,EAELD,U;;;KAHTM,G;AA2CT,eAAeA,GAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { Route, Switch, useHistory, useLocation } from \"react-router\";\r\nimport Signin from \"./components/auth/Signin\";\r\nimport Signup from \"./components/auth/Signup\";\r\n\r\nimport Layout from \"./components/Layout/Layout\";\r\nimport Todo from \"./components/Todo/Todo\";\r\n\r\nfunction App() {\r\n  const { pathname } = useLocation();\r\n\r\n  const history = useHistory();\r\n\r\n  const [state, setState] = useState({\r\n    isAuth: false,\r\n    token: null,\r\n    userId: null,\r\n    authLoading: false,\r\n    error: null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (state.isAuth && pathname === \"/\") {\r\n      history.push(\"/all-todos\");\r\n    } else {\r\n      history.push(\"/signin\");\r\n    }\r\n  });\r\n\r\n  let routes = (\r\n    <Switch>\r\n      <Route exact path=\"/\" component={Todo} />\r\n    </Switch>\r\n  );\r\n\r\n  if (!state.isAuth) {\r\n    routes = (\r\n      <Switch>\r\n        <Route exact path=\"/signin\" component={Signin} />\r\n        <Route path=\"/signup\" component={Signup} />\r\n      </Switch>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Layout>{routes}</Layout>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}