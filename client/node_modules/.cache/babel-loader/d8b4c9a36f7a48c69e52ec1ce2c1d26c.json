{"ast":null,"code":"import _objectSpread from \"S:/personal-projects/mern-todo-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"S:/personal-projects/mern-todo-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"S:/personal-projects/mern-todo-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"S:/personal-projects/mern-todo-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"S:\\\\personal-projects\\\\mern-todo-app\\\\client\\\\src\\\\App.tsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { Route, Switch, useHistory, useLocation } from \"react-router\";\nimport Signin from \"./components/auth/Signin\";\nimport Signup from \"./components/auth/Signup\";\nimport Layout from \"./components/Layout/Layout\";\nimport Todo from \"./components/Todo/Todo\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  var _this = this;\n\n  var _useLocation = useLocation(),\n      pathname = _useLocation.pathname;\n\n  var history = useHistory();\n\n  var _useState = useState({\n    isAuth: false,\n    token: null,\n    userId: null,\n    authLoading: false,\n    error: null\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  useEffect(function () {\n    if (state.isAuth && pathname === \"/\") {\n      history.push(\"/all-todos\");\n    } else {\n      history.push(\"/signin\");\n    }\n  }, [state.isAuth, pathname]); // login handler\n\n  var loginHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(email, password) {\n      var _yield$axios$post, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.post(\"/signin\", {\n                email: email,\n                password: password\n              });\n\n            case 3:\n              _yield$axios$post = _context.sent;\n              data = _yield$axios$post.data;\n              console.log(data);\n              _context.next = 10;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n\n    return function loginHandler(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }(); // signup handler\n\n\n  var signupHandler = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email, password, name) {\n      var _yield$axios$post2, data;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.post(\"/signin\", {\n                email: email,\n                password: password,\n                name: name\n              });\n\n            case 3:\n              _yield$axios$post2 = _context2.sent;\n              data = _yield$axios$post2.data;\n              console.log(data);\n              _context2.next = 10;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](0);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 8]]);\n    }));\n\n    return function signupHandler(_x3, _x4, _x5) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // routes\n\n\n  var routes = /*#__PURE__*/_jsxDEV(Switch, {\n    children: /*#__PURE__*/_jsxDEV(Route, {\n      exact: true,\n      path: \"/\",\n      render: function render(props) {\n        return /*#__PURE__*/_jsxDEV(Todo, _objectSpread(_objectSpread({}, props), {}, {\n          isAuth: state.isAuth\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 28\n        }, _this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n\n  if (!state.isAuth) {\n    routes = /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/signin\",\n        render: function render(props) {\n          return /*#__PURE__*/_jsxDEV(Signin, _objectSpread(_objectSpread({}, props), {}, {\n            loginHandler: loginHandler,\n            authLoading: state.authLoading\n          }), void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, _this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/signup\",\n        render: function render(props) {\n          return /*#__PURE__*/_jsxDEV(Signup, _objectSpread(_objectSpread({}, props), {}, {\n            signupHandler: signupHandler,\n            authLoading: state.authLoading\n          }), void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, _this);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Layout, {\n      children: routes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"xuj4EyE1Kv2TBwHv0C+OPzaIdGk=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["S:/personal-projects/mern-todo-app/client/src/App.tsx"],"names":["axios","React","useState","useEffect","Route","Switch","useHistory","useLocation","Signin","Signup","Layout","Todo","App","pathname","history","isAuth","token","userId","authLoading","error","state","setState","push","loginHandler","email","password","post","data","console","log","signupHandler","name","routes","props"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { Route, Switch, useHistory, useLocation } from \"react-router\";\r\nimport Signin from \"./components/auth/Signin\";\r\nimport Signup from \"./components/auth/Signup\";\r\n\r\nimport Layout from \"./components/Layout/Layout\";\r\nimport Todo from \"./components/Todo/Todo\";\r\n\r\nfunction App() {\r\n  const { pathname } = useLocation();\r\n\r\n  const history = useHistory();\r\n\r\n  const [state, setState] = useState({\r\n    isAuth: false,\r\n    token: null,\r\n    userId: null,\r\n    authLoading: false,\r\n    error: null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (state.isAuth && pathname === \"/\") {\r\n      history.push(\"/all-todos\");\r\n    } else {\r\n      history.push(\"/signin\");\r\n    }\r\n  }, [state.isAuth, pathname]);\r\n\r\n  // login handler\r\n  const loginHandler = async (email: string, password: string) => {\r\n    try {\r\n      const { data } = await axios.post(\"/signin\", { email, password });\r\n      console.log(data);\r\n    } catch (error) {}\r\n  };\r\n\r\n  // signup handler\r\n  const signupHandler = async (\r\n    email: string,\r\n    password: string,\r\n    name: string\r\n  ) => {\r\n    try {\r\n      const { data } = await axios.post(\"/signin\", { email, password, name });\r\n      console.log(data);\r\n    } catch (error) {}\r\n  };\r\n\r\n  // routes\r\n  let routes = (\r\n    <Switch>\r\n      <Route\r\n        exact\r\n        path=\"/\"\r\n        render={(props) => <Todo {...props} isAuth={state.isAuth} />}\r\n      />\r\n    </Switch>\r\n  );\r\n\r\n  if (!state.isAuth) {\r\n    routes = (\r\n      <Switch>\r\n        <Route\r\n          exact\r\n          path=\"/signin\"\r\n          render={(props) => (\r\n            <Signin\r\n              {...props}\r\n              loginHandler={loginHandler}\r\n              authLoading={state.authLoading}\r\n            />\r\n          )}\r\n        />\r\n        <Route\r\n          path=\"/signup\"\r\n          render={(props) => (\r\n            <Signup\r\n              {...props}\r\n              signupHandler={signupHandler}\r\n              authLoading={state.authLoading}\r\n            />\r\n          )}\r\n        />\r\n      </Switch>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Layout>{routes}</Layout>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}